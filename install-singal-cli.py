# import the os module
import os 

# print a message to the user
print('make sure you run this script with sudo or root privileges')

# update the package manager
os.system('sudo apt update')

# install the default Java runtime environment
os.system('sudo apt-get install default-jre')

# install the libunixsocket-java package
os.system('sudo apt-get install libunixsocket-java')

# install the OpenJDK Java Development Kit and Java Runtime Environment
os.system('sudo apt install openjdk-17-jdk openjdk-17-jre')

# ask the user to visit the GitHub releases page and enter the latest version
version = input('plase visit https://github.com/AsamK/signal-cli/releases to get lasets version \nplease enter the latest version for example 0.11.6 : ')

# download the Signal CLI release for Linux
os.system(f'wget https://github.com/AsamK/signal-cli/releases/download/v{version}/signal-cli-{version}-Linux.tar.gz')

# extract the Signal CLI release to the /opt directory
os.system(f'sudo tar xf signal-cli-{version}-Linux.tar.gz -C /opt')

# create a symbolic link to the Signal CLI executable
os.system(f'sudo ln -sf /opt/signal-cli-{version}/bin/signal-cli /usr/local/bin/')

# ask the user to enter their phone number
phone_num = "Please Enter Phone number for exaple +CCXXXXXXXXX : "

# register the phone number with Signal CLI
os.system(f'signal-cli -u {phone_num} register ')

# ask the user to enter the captcha
captcha = "enter captcha : "

# complete the registration process with the captcha
os.system(f'signal-cli -u {phone_num} register {captcha}')

# start the Signal CLI daemon
os.system(f'signal-cli -u {phone_num} daemon --dbus &')

# reminder to run the Signal CLI daemon when the system restarts
# signal-cli -u +CCXXXXXXXXX daemon --dbus
